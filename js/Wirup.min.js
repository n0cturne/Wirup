"use strict";var wirup=function(){};wirup.prototype=function(){var e,t=function(e,t,n,o){var a=new XMLHttpRequest;return a.open(e,t,!0),a.setRequestHeader("Content-Type",n),a.onload=o,a.send(),a.responseText},n=window.location.hash.split("#")[1],o=function(){e=JSON.parse(this.responseText).templates},a=function(n,o){t("GET","templates/"+e[n].HTML,"text/plain; charset=UTF-8",function(){var e;(e=o,document.getElementById(e)).innerHTML=this.responseText})},r=[],i=function(){for(var e,t=0;t<=r.length-1;t++){e=document.getElementsByTagName(r[t].componentName);for(var n=0;n<=e.length-1;n++)void 0!=e[n]&&null!=e[n]&&(e[n].innerHTML=r[t].HTML)}},l=function(e){return typeof u},s=[],c=[],u=null,d=function(e,t){for(var n=!1,o=0;o<=s.length-1;o++)s[o].templateName==e&&(n=!0);n||s.push({templateName:e,templateHTML:t})},m=function(e,t,n){for(var o=!1,a=0;a<=e.length-1;a++)e[a].dataModelName==n&&(o=!0,e[a][t]=n);o||e.push({dataModelName:t,dataObject:n})},p=function(){y();for(var e,t=document.querySelectorAll("[data-list]"),n=[],o=0;o<=t.length-1;o++){var a=t[o].getAttribute("data-list");if((e=document.createElement(t[o].tagName)).className=t[o].className,m(c,a,window[a]),d(a,t[o]),"Array"==l());else{n=f(a,t[o]);for(var r=0;r<=n.length-1;r++)e.appendChild(n[r])}e.setAttribute("data-list",a),t[o].parentNode.replaceChild(e,t[o])}},f=function(e,t){if("string"==typeof window[e])var n=N(e);else n=window[e];window[e]=n;var o,a=function(e){for(var t,n=0;n<=s.length-1;n++)s[n].templateName==e&&(t=s[n].templateHTML);return t}(e),r=[];document.createElement(a.tagName).className=a.className;for(var i=0;i<=n[e].length-1;i++){var l=n[e][i];o=h(e,l,i,a.childNodes[1]),r.push(o)}return r},h=function(e,t,n,o){var a,r=o.cloneNode(!0);for(var i in t)a=g(e,t,n,r,i);return a},w={subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0},v=function(e,t,n){for(var o=e.attributes,a=o.length-1;a>=0;a--){o[a].value=="--"+t+"--"&&e.setAttribute(o[a].name,n)}},g=function(e,t,n,o,a){return function o(r){for(var i=0;i<r.childNodes.length;i++){var l=r.childNodes[i];if(l.nodeType!==Node.TEXT_NODE&&l.childNodes)o(l);else if(l.nodeValue.indexOf("--"+a+"--")>-1){l.nodeValue=t[a],v(l.parentElement,a,t[a]);var s=window[e];new MutationObserver(function(t){for(var o=0;o<t.length;o++)console.log(s),s[e][n][a]=l.nodeValue,window[e]=s,console.log(window[e])}).observe(r,w)}}}(o),o},N=function(e){try{return JSON.parse(window[e])}catch(t){return window[e]}},T=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},y=function(){var e=document.getElementById("progress_bar"),t=1;e.parentElement.style.display="block";var n=setInterval(function(){t>=100?(clearInterval(n),e.parentElement.style.display="none"):(t++,e.style.width=t+"%")},20)},E=[],M=function(){t("GET","templates/templates.json","application/json; charset=UTF-8",o),setTimeout(function(){!function(t){var o,r=n;console.log(n),""==n.trim()&&(r="/");for(var i=0;i<=e.length-1;i++)e[i].url==r&&(o=i);a(o,t)}("contentBody")},1e3),setTimeout(function(){i()},2e3),setTimeout(function(){p(),setInterval(function(){for(var e=0;e<=c.length-1;e++)E.length<c.length&&(E[e]=JSON.stringify(window[c[e].dataModelName])),E[e]!=JSON.stringify(window[c[e].dataModelName])&&(E[e]=JSON.stringify(window[c[e].dataModelName]),p())},500)},3e3),window.onhashchange=function(){window.location.hash!=n&&(n=window.location.hash.split("#")[1],M())},T("components/components.js")};return{loadScript:T,setTemplateHolder:function(e){e},registerComponent:function(e){for(var t,n=0;n<=r.length-1;n++)r[n].componentName==e.componentName&&(t=n);void 0!=t&&null!=t?r[n]=e:r.push(e)},renderComponents:i,init:M}}(),window.wuObject=new wirup;
