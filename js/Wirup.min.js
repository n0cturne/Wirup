"use strict";var wirup=function(){};wirup.prototype=function(){var e,t=function(e){return document.getElementById(e)},n=(e,t,n,o)=>new Promise(function(a,r){var i=new XMLHttpRequest;return i.open(e,t,!0),i.setRequestHeader("Content-Type",n),i.setRequestHeader("cache-control","no-cache"),i.setRequestHeader("expires","0"),i.setRequestHeader("expires","Tue, 01 Jan 1980 1:00:00 GMT"),i.setRequestHeader("pragma","no-cache"),i.onreadystatechange=(()=>{if(4!==i.readyState)return;if(200===i.status)a(o(i.responseText));else{const e=i.statusText||"The reason is mysterious. Call Yoda!";r(e)}}),i.send(),i.responseText}),o=window.location.hash.split("#")[1],a=()=>n("GET","views/views.json","application/json; charset=UTF-8",r),r=t=>{e=JSON.parse(t).views},i=t=>new Promise(function(n,a){var r,i=o;if(void 0===o&&(window.location="/#/"),e){for(var s=0;s<=e.length-1;s++)e[s].url==i&&(r=s);c(r,t).then(()=>{n()})}}),c=(o,a)=>n("GET","views/"+e[o].HTML,"text/plain; charset=UTF-8",e=>{t(a).innerHTML=e}),s=()=>{window.onhashchange=function(){window.location.hash!=o&&(o=window.location.hash.split("#")[1],C())}},u={},f={},d=(e,t)=>{f[e]=t},w=(e,t)=>{u[e]=t},l=()=>new Promise(function(e,n){for(var o=t("contentBody").getElementsByTagName("*"),a="",r=0;r<=o.length-1;r++)a+="<"+o[r].tagName.toLowerCase()+' datasource="'+o[r].getAttribute("datasource")+'" >',a+=p(o[r].tagName.toLowerCase(),o[r].getAttribute("datasource")),a+="</"+o[r].tagName.toLowerCase()+">";t("contentBody").innerHTML=a,T("Switched View","Content Body","No Comment."),e()}),m=e=>{t("contentBody").querySelectorAll('[datasource="'+e+'"]').forEach(function(t){t.innerHTML=p(t.tagName.toLowerCase(),e),T("Updated Data.",t.tagName.toLowerCase(),"No Comment.")})},p=(e,t)=>{let n="";var o=typeof u[t];switch(o){case"object":n=u[t].map((t,n)=>f[e](t));break;case"string":n=f[e](u[t])}return n.join("")},x=(e,t)=>{let n="";e.forEach((e,o)=>{dataSourceType=typeof u[t[o]];switch(dataSourceType){case"object":n=u[t[o]].map((t,n)=>f[e](t));break;case"string":n=f[e](u[t[o]])}});return n.join("")},g=function(){var e={};setInterval(function(){for(var t in u){var n=JSON.stringify(window.wuObject.dataStore[t]);void 0===e[t]&&(e[t]=n),e[t]!=n&&(e[t]=n,m(t))}},3500)},h=(()=>{var e=(new Date).getTime();e=Date.now();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t},function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e+"?"+(new Date).getTime(),document.getElementsByTagName("head")[0].appendChild(t)}),y=function(){function e(){100>n?(n+=10,t.style.width=n+"%"):(t.parentElement.style.display="none",window.clearInterval(o))}var t=document.getElementById("progress_bar"),n=1;t.parentElement.style.display="block";var o=setInterval(e,120)},v="",T=(e,t,n)=>{let o=new Date;let a=o.getTime();let r={name:e,element:t,comment:n,profile:v,timestamp:a};let i=localStorage.getItem("wuActions");localStorage.setItem("wuActions",i+","+JSON.stringify(r))},S=e=>{v=e},C=()=>{y();h("components/components.js");a().then(()=>{i("contentBody").then(()=>{l()})});g();s()};return{wu:t,wijax:n,jsonize:function(e){try{return JSON.parse(window[e])}catch(t){return window[e]}},loadScript:h,registerComponent:d,registerProfile:S,registerAction:T,buildComponent:p,buildComponents:x,registerData:w,dataStore:u,components:f,init:C}}(),window.wuObject=new wirup;