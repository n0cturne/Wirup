"use strict";var wirup=function(){};wirup.prototype=function(){var e,t=function(e){return document.getElementById(e)},n=(e,t,n,o)=>new Promise((i,a)=>{var r=new XMLHttpRequest;r.open(e,t,!0);r.setRequestHeader("Content-Type",n);r.setRequestHeader("cache-control","no-cache");r.setRequestHeader("expires","0");r.setRequestHeader("expires","Tue, 01 Jan 1980 1:00:00 GMT");r.setRequestHeader("pragma","no-cache");r.onreadystatechange=(()=>{if(4!==r.readyState)return;if(200===r.status)i(o(r.responseText));else{const e=r.statusText||"Your ajax request threw an error.";a(e)}});r.send();return r.responseText}),o=window.location.hash.split("#")[1],i=()=>n("GET","views/views.json","application/json; charset=UTF-8",a),a=t=>{e=JSON.parse(t).views},r=t=>new Promise((n,i)=>{let a;var r=o;void 0===o&&(window.location="/#/");if(e){for(var s=0;s<=e.length-1;s++)e[s].url==r&&(a=s);c(a,t).then(()=>{n()})}}),c=(o,i)=>n("GET","views/"+e[o].HTML,"text/plain; charset=UTF-8",e=>{t(i).innerHTML=e}),s=()=>{window.onhashchange=function(){window.location.hash!=o&&(o=window.location.hash.split("#")[1],E())}},u={},f={},d=(e,t)=>{f[e]=t},p=(e,t)=>{Object.defineProperty(u,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e];this["_"+e]=t,g(e)}});u[e]=t},l=(e,t)=>{var n=[];n=u[e];n.push(t);u[e]=n;n=[]},w=(e,t,n)=>{var o=[];o=u[e];t=0>t-1?0:t-1;o[t]=n;u[e]=o;o=[]},m=(e,t)=>{var n=[];n=u[e];t=0>t-1?0:t-1;n.splice(t,1);u[e]=n;n=[]},h=()=>new Promise(function(e,n){var o=t("contentBody").querySelectorAll("[datasource]");[].forEach.call(o,e=>{e.innerHTML=y(e.tagName.toLowerCase(),e.getAttribute("datasource"))}),S("Switched View","Content Body","No Comment."),e()}),g=e=>{t("contentBody").querySelectorAll('[datasource="'+e+'"]').forEach(t=>{t.innerHTML=y(t.tagName.toLowerCase(),e);S("Updated Data.",t.tagName.toLowerCase(),"No Comment.")})},y=(e,t)=>{let n="";var o=typeof u[t];switch(o){case"object":n=u[t].map((t,n)=>f[e](t));break;case"string":n=f[e](u[t])}return n.join("")},v=(e,t)=>{let n="";e.forEach((e,o)=>{dataSourceType=typeof u[t[o]];switch(dataSourceType){case"object":n=u[t[o]].map((t,n)=>f[e](t));break;case"string":n=f[e](u[t[o]])}});return n.join("")},T=function(e){return new Promise((t,n)=>{var o=document.createElement("script");o.type="text/javascript";o.src=e+"?"+(new Date).getTime();document.getElementsByTagName("head")[0].appendChild(o);o.onload=(()=>{t()});o.onabort=(()=>{n()})})},b=e=>{var t=document.getElementById("progress_bar");t.parentElement.style.display="block";t.parentElement.style.display=100>e?"block":"none";t.style.width=e+"%"},j="",S=(e,t,n)=>{let o=new Date;let i=o.getTime();let a={name:e,element:t,comment:n,profile:j,timestamp:i};let r=localStorage.getItem("wuActions");localStorage.setItem("wuActions",r+","+JSON.stringify(a))},C=e=>{j=e},E=()=>{T("components/components.js").then(()=>{b(25);i().then(()=>{b(55);r("contentBody").then(()=>{b(75);h().then(()=>{b(100)})})})});s()};return{wu:t,wijax:n,jsonize:function(e){try{return JSON.parse(window[e])}catch(t){return window[e]}},loadScript:T,registerComponent:d,registerProfile:C,registerAction:S,buildComponent:y,buildComponents:v,registerData:p,addData:l,updateData:w,removeData:m,dataStore:u,components:f,init:E}}(),window.wuObject=new wirup;